<div class="repos-list-component-wrapper">
    <div class="title-wrapper">
        <h3 class="gf-text-l gf-text-regular">
            <span class="github">Github</span>Search
        </h3>
        <fa-icon [icon]="icons.github"></fa-icon>
    </div>

    <div class="search-input-wrapper">
        <input type="search" class="gf-text-s" [formControl]="searchControl" name="search"
            placeholder="Search public github repos here">
        <fa-icon class="gf-text-s" [icon]="icons.magnifyingGlass"></fa-icon>
    </div>

    <div class="repos-widget-wrapper">
        <p class="error-message gf-text-l" *ngIf="isError">Error loading data, try again later</p>
        <ng-container *ngIf="githubReposListPerPage">
            <div class="heading-format-wrapper">
                <span class="results-count gf-text-m"> {{totalNumberOfGitRepos}} Matching results<span *ngIf="githubReposListPerPage">:</span></span>
                 
                <div class="view-format-wrapper">
                    <span class="gf-text-s">Display format: </span>
                    <button class="tabular-view" (click)="displayFormat = 'card'">
                        <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" 
                        fill="currentColor" 
                        viewBox="0 0 512 481.157">
                      <path d="M35.64 0h159.702c19.604 0 35.641 16.037 35.641 35.64v145.308c0 19.604-16.037 35.64-35.641 35.64H35.64c-19.603 0-35.64-16.036-35.64-35.64V35.64C0 16.037 16.037 0 35.64 0zm281.017 264.569h159.702c19.604 0 35.641 16.036 35.641 35.64v145.307c0 19.604-16.037 35.641-35.641 35.641H316.657c-19.603 0-35.64-16.037-35.64-35.641V300.209c0-19.604 16.037-35.64 35.64-35.64zm-281.017 0h159.702c19.604 0 35.641 16.036 35.641 35.64v145.307c0 19.604-16.037 35.641-35.641 35.641H35.64C16.037 481.157 0 465.12 0 445.516V300.209c0-19.604 16.037-35.64 35.64-35.64zM316.657 0h159.702C495.963 0 512 16.037 512 35.64v145.308c0 19.604-16.037 35.64-35.641 35.64H316.657c-19.603 0-35.64-16.036-35.64-35.64V35.64c0-19.603 16.037-35.64 35.64-35.64z"/>
                    </svg>
                    
                    </button>
                    <button class="card-view" (click)="displayFormat = 'tabular'">
                        <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" 
                        fill="currentColor" 
                        viewBox="0 0 512 474.051">
                      <path d="M11.216 0H88.37c6.169 0 11.216 5.047 11.216 11.216v70.947c0 6.17-5.047 11.217-11.216 11.217H11.216C5.047 93.38 0 88.333 0 82.163V11.216C0 5.047 5.047 0 11.216 0zm152.662 380.672h336.906c6.169 0 11.216 5.05 11.216 11.216v70.947c0 6.166-5.051 11.216-11.216 11.216H163.878c-6.166 0-11.217-5.046-11.217-11.216v-70.947c0-6.169 5.047-11.216 11.217-11.216zm-152.662 0H88.37c6.169 0 11.216 5.047 11.216 11.216v70.947c0 6.17-5.047 11.216-11.216 11.216H11.216C5.047 474.051 0 469.005 0 462.835v-70.947c0-6.169 5.047-11.216 11.216-11.216zm152.662-190.336h336.906c6.169 0 11.216 5.05 11.216 11.216v70.947c0 6.166-5.051 11.216-11.216 11.216H163.878c-6.166 0-11.217-5.046-11.217-11.216v-70.947c0-6.17 5.047-11.216 11.217-11.216zm-152.662 0H88.37c6.169 0 11.216 5.046 11.216 11.216v70.947c0 6.17-5.047 11.216-11.216 11.216H11.216C5.047 283.715 0 278.669 0 272.499v-70.947c0-6.17 5.047-11.216 11.216-11.216zM163.878 0h336.906C506.953 0 512 5.051 512 11.216v70.947c0 6.166-5.051 11.217-11.216 11.217H163.878c-6.166 0-11.217-5.047-11.217-11.217V11.216C152.661 5.047 157.708 0 163.878 0z"/>
                    </svg>
                    
                    </button>
                </div>       
            </div>
            
            <div class="repo-wrapper" [ngClass]="displayFormat">
                <a [routerLink]="['/repo-details', repo.id]" class="repo" *ngFor="let repo of githubReposListPerPage; trackBy: trackById">
                    <div class="github-background">
                        <fa-icon [icon]="icons.github"></fa-icon>
                    </div>
                    <div class="description-wrapper">
                        <span class="details-hoverable gf-text-xs gf-text-regular">View details</span>
                        <p class="repo-owner text-overflow">
                            <span class="gf-text-xs gf-text-semibold gf-text-marked">Owner: </span>
                            <span class="gf-text-xs gf-text-dark">{{repo.owner.login}}</span>
                        </p>
                        <p class="repo-name gf-text-xs gf-text-regular text-overflow">
                           <span class="gf-text-xs gf-text-semibold gf-text-marked">Name: </span> 
                           <span class="gf-text-xs gf-text-dark">{{repo.name}}</span>
                        </p>
                        <p class="description gf-text-xs text-overflow">
                            <span class="gf-text-xs gf-text-semibold gf-text-marked">Description: </span> 
                            <span class="gf-text-xs gf-text-dark">{{repo.description}}</span>
                        </p>
                    </div>
                </a>
            </div>
        </ng-container>
        <app-loader *ngIf="isLoading"></app-loader>
    </div>

    <div class="pagination-wrapper" *ngIf="maxReposPerPage">
        <div class="pagination">
            <label for="numberOfRepos" class="gf-text-s">Items per page:</label>
            <select name="numberOfRepos" id="numberOfRepos" value="50"
                (change)="updateSelectedNumberOfReposPerPage(+select.value)" #select>
                <option [value]="maxReposPerPage">{{maxReposPerPage}}</option>
                <option value="25">25</option>
                <option value="10">10</option>
                <option value="5">5</option>
            </select>
        </div>

        <div class="total-shown-items">
            <span class="gf-text-s">Shown {{totalShowedRepos}} of {{totalNumberOfGitRepos}} </span>
        </div>

        <div class="page">
            <p class="gf-text-s">page {{selectedPage}}/{{(totalNumberOfGitRepos | totalPages: maxReposPerPage) || 1}}<span *ngIf="isIncompleteResult" class="gf-text-m">+</span></p>

            <div class="next-previous-buttons-wrapper">
                <button [disabled]="selectedPage === 1" (click)="navigateToPages('prev')">&lt;</button>
                <button [disabled]="selectedPage >= (totalNumberOfGitRepos | totalPages: maxReposPerPage)" (click)="navigateToPages('next')">&gt;</button>
            </div>
        </div>
    </div>
</div>